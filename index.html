<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ë¡œ ì“°ëŠ” ì¼ê¸°</title>
    <link rel="manifest" href="manifest.json">
    <style>
        .day-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .day-selector label {
            cursor: pointer;
            padding: 5px 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            user-select: none;
        }
        .selected {
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>
<body>
    <h1>ë§ë¡œ ì“°ëŠ” ì¼ê¸°</h1>

    <label for="timePicker">ë…¹ìŒí•  ì‹œê°„ ì„¤ì •:</label>
    <input type="time" id="timePicker">
    <button id="setTimeBtn">ì‹œê°„ ì„¤ì •</button>

    <br><br>

    <label>ë…¹ìŒí•  ìš”ì¼ ì„ íƒ:</label>
    <div class="day-selector">
        <label><input type="checkbox" id="everyday" value="ë§¤ì¼"> ë§¤ì¼</label>
        <label><input type="checkbox" class="weekday" value="ì›”"> ì›”</label>
        <label><input type="checkbox" class="weekday" value="í™”"> í™”</label>
        <label><input type="checkbox" class="weekday" value="ìˆ˜"> ìˆ˜</label>
        <label><input type="checkbox" class="weekday" value="ëª©"> ëª©</label>
        <label><input type="checkbox" class="weekday" value="ê¸ˆ"> ê¸ˆ</label>
        <label><input type="checkbox" class="weekday" value="í† "> í† </label>
        <label><input type="checkbox" class="weekday" value="ì¼"> ì¼</label>
    </div>

    <p id="status">ğŸ™ï¸ ëŒ€ê¸° ì¤‘...</p>
    <p><strong>í…ìŠ¤íŠ¸ ë³€í™˜ ê²°ê³¼:</strong></p>
    <p id="transcription"></p>

    <button id="saveBtn">ğŸ’¾ ì €ì¥í•˜ê¸°</button>

    <h2>ğŸ“‚ ì €ì¥ëœ ì¼ê¸°</h2>
    <ul id="savedNotes"></ul>

    <script>
        let scheduledTime = localStorage.getItem("recordTime") || null;
        let scheduledDays = JSON.parse(localStorage.getItem("recordDays")) || [];

        document.getElementById("timePicker").value = scheduledTime || "";

        // ğŸ”¹ ìš”ì¼ ì„ íƒ ì´ë²¤íŠ¸ ì²˜ë¦¬
        document.querySelectorAll(".day-selector input").forEach(input => {
            input.addEventListener("change", function() {
                if (this.id === "everyday" && this.checked) {
                    // "ë§¤ì¼" ì„ íƒ ì‹œ ë‹¤ë¥¸ ìš”ì¼ í•´ì œ
                    document.querySelectorAll(".weekday").forEach(weekday => {
                        weekday.checked = false;
                    });
                } else if (!this.checked && document.querySelectorAll(".weekday:checked").length === 0) {
                    // ìµœì†Œ í•˜ë‚˜ì˜ ìš”ì¼ì€ ì„ íƒë˜ë„ë¡ í•¨
                    this.checked = true;
                } else {
                    // ê°œë³„ ìš”ì¼ ì„ íƒ ì‹œ "ë§¤ì¼" í•´ì œ
                    document.getElementById("everyday").checked = false;
                }
            });
        });

        // ğŸ”¹ ì‹œê°„ ì„¤ì • ë²„íŠ¼ í´ë¦­ ì‹œ ì €ì¥
        document.getElementById("setTimeBtn").addEventListener("click", function() {
            scheduledTime = document.getElementById("timePicker").value;
            let selectedDays = [];
            
            if (document.getElementById("everyday").checked) {
                selectedDays.push("ë§¤ì¼");
            } else {
                document.querySelectorAll(".weekday:checked").forEach(checkbox => {
                    selectedDays.push(checkbox.value);
                });
            }

            if (scheduledTime && selectedDays.length > 0) {
                localStorage.setItem("recordTime", scheduledTime);
                localStorage.setItem("recordDays", JSON.stringify(selectedDays));
                alert(`â° ${selectedDays.join(", ")} ${scheduledTime}ì— ë…¹ìŒì´ ì‹œì‘ë©ë‹ˆë‹¤!`);
            } else {
                alert("â³ ì‹œê°„ì„ ì„¤ì •í•˜ê³  ìš”ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
            }
        });
    </script>
</body>
</html>
